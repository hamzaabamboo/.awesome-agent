---
allowed-tools: Bash(gh issue:*), Bash(gh api:*), Bash(git log:*), Bash(git diff:*), Bash(git status:*)
description: GitHub Issueを作成
---

## 引数

- `$ARGUMENTS`: Issue作成に関する説明や要件（必須）

## 手順

### 1. 引数の確認

- `$ARGUMENTS` が空の場合、ユーザーにIssueの内容を確認する
- 引数がある場合はその内容を元にIssueを作成

### 2. リポジトリの確認

- `gh repo view --json nameWithOwner --jq '.nameWithOwner'` でリポジトリを確認
- リポジトリ名を表示して「このリポジトリにIssueを作成しますか？」と確認
- ユーザーが承認しない場合は処理を中断

### 3. Issueテンプレートの確認

1. `.github/ISSUE_TEMPLATE/` ディレクトリが存在するか確認
2. テンプレートが存在する場合:
   - 利用可能なテンプレート一覧を表示
   - ユーザーに使用するテンプレートを選択させる
   - 選択されたテンプレートの形式に従う
3. テンプレートが存在しない場合:
   - デフォルトフォーマットを使用

### 4. Issue内容の生成

`$ARGUMENTS` の内容を分析し、以下を生成:

**タイトル:**
- 変更内容を簡潔に表現（日本語）
- 40文字以内
- 必要に応じてプレフィックスを付与（[機能追加], [バグ修正], [改善] など）

**本文（デフォルトフォーマット）:**
```
## 概要

[Issueの概要を簡潔に説明]

## 詳細

[詳細な説明、背景、要件など]

## タスク

- [ ] [実装すべきタスク1]
- [ ] [実装すべきタスク2]
```

### 5. Issueの確認と作成

1. 生成したタイトルと本文をユーザーに表示
2. ユーザーの確認を得る
3. 確認後、`gh issue create --title "<タイトル>" --body "<本文>"` で作成
4. 作成されたIssue URLを表示

## オプション

ユーザーが追加で指定できるオプション:

- **ラベル**: `--label` で指定
- **アサイン**: `--assignee` で指定
- **マイルストーン**: `--milestone` で指定

これらはユーザーが明示的に指定した場合のみ追加する。

## 注意事項

- 日本語で出力
- タイトルは簡潔かつ具体的に
- タスクリストは実装可能な粒度で分割
- 技術的な詳細が必要な場合は「詳細」セクションに記載
